<!DOCTYPE html>
<html ng-app="bloggerApp">
  <head>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="/angular/angular.min.js"></script>
    <script src="/angular/angular-route.min.js"></script>
    <script src="/angular/angular-ui-router.min.js"></script>
    <title>Jonathan Wilkins' Blog</title>
  </head>
  <body>
    <!-- Navigation Bar -->
    <div ng-controller="NavigationController">
      <navigation></navigation>
    </div>

    <!-- Angular Templates -->
    <script type="text/ng-template" id="home.html">
      <h1 class="mt-5">{{ vm.title }}</h1>
      <p>Welcome to my blog site.
         I am a student at Millersville University, and I am currently studying computer science.</br>
         This website is a mock up blog site project for a class assignment.
      </p>
    </script>
    
    <script type="text/ng-template" id="blogList.html">
      <h1 class="mt-5 mb-4">{{ vm.title }}</h1>
      <div class="list ml-5 d-flex flex-column h-100 w-75 align-items-left">
        <div ng-repeat="blog in vm.blogs">
          <div class="blogListing border rounded w-100 p-4 mb-3 d-inline-flex-column">
            <h4 class="blogHeading">
              {{ blog.blogTitle }}
              <span class="text-muted font-italic font-weight-light"> - Published by {{ blog.name }} on {{ blog.createdOn | date:'fullDate' }}</span>
            </h4>
            <pre class="blogText m-3">{{ blog.blogText }}</pre>
            <div class="options d-inline-flex">
              <a ng-show="vm.isCurrentUser(blog.email)" class="nav-link px-8" href="#/blog/edit/{{ blog.id }}"> <i class="fa fa-edit fa-lg"></i></a>
              <a ng-show="vm.isCurrentUser(blog.email)" class="nav-link px-8" href="#/blog/delete/{{ blog.id }}"> <i class="fa fa-trash fa-lg"></i></a>
            </div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/ng-template" id="blogAdd.html">
      <h1 class="mt-5">{{ vm.title }}</h1>
        <div class="container">
          <div class="list ml-5 d-flex flex-column h-100 align-items-center">
            <div class="blogListing border rounded p-4 mb-3 w-75 d-inline-flex-column">
              <form name="blogForm" ng-submit="vm.submit()" ng-controller="AddController" class="d-flex flex-column align-items-center">
                <input class="w-75 mb-4" type="text" name="blogTitle" placeholder="Blog title here">
                <textarea class="w-75 mb-4" type="text" name="blogText" placeholder="Blog text here"></textarea>
                <input class="w-25 border border-dark rounded bg-primary text-white" type="submit" value="Add">
              </form>
            <div class="mt-2 d-flex flex-column align-items-center">
              <button class="w-25 border border-dark rounded">
                <a ng-click="vm.cancel()" ng-controller="AddController" class="text-decoration-none text-dark d-block">Cancel</a>
              </button>
            </div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/ng-template" id="blogEdit.html" href="pages/blogEdit.html">
      <h1 class="mt-5">{{ vm.title }}</h1>
      <div class="container">
        <div class="list ml-5 d-flex flex-column h-100 align-items-center">
          <div class="blogListing border rounded p-4 mb-3 w-75 d-inline-flex-column">
            <form name="blogForm" ng-submit="vm.submit()" ng-controller="EditController" class="d-flex flex-column align-items-center">
              <input class="w-75 mb-4" type="text" name="blogTitle" value="{{ vm.blog.blogTitle }}">
              <textarea class="h-25 w-75 mb-4" type="text" name="blogText">{{ vm.blog.blogText }}</textarea>
              <input class="w-25 border border-dark rounded bg-primary text-white" type="submit" value="Edit">
            </form>
            <div class="mt-2 d-flex flex-column align-items-center">
              <button class="w-25 border border-dark rounded">
                <a ng-click="vm.cancel()" ng-controller="EditController" class="text-decoration-none text-dark d-block">Cancel</a>
              </button>
            </div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/ng-template" id="blogDelete.html"">
      <h1 class="mt-5">{{ vm.title }}</h1>
      <div class="container">
        <div class="list ml-5 d-flex flex-column h-100 align-items-center">
          <div class="blogListing border rounded p-4 mb-3 w-75 d-inline-flex-column">
            <form name="blogForm" ng-submit="vm.submit()" ng-controller="DeleteController" class="d-flex flex-column align-items-center">
              <input class="w-75 mb-4 border border-dark rounded" style="background-color:#e6e6e6" type="text" name="blogTitle" value="{{ vm.blog.blogTitle }}" readonly>
              <textarea class="w-75 mb-4 border border-dark rounded" style="background-color:#e6e6e6" type="text" name="blogText" readonly>{{ vm.blog.blogText }}</textarea>
              <input class="w-25 border border-dark rounded bg-primary text-white" type="submit" value="Delete">
            </form>
            <div class="mt-2 d-flex flex-column align-items-center">
              <button class="w-25 border border-dark rounded">
                <a ng-click="vm.cancel()" ng-controller="DeleteController" class="text-decoration-none text-dark d-block">Cancel</a>
              </button>
            </div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/ng-template" id="registerPage.html">
      <h1 class="mt-5">{{ vm.pageHeader.title }}</h1>
      <div class="container">
        <div class="list ml-5 d-flex flex-column h-100 align-items-center">
          <div class="blogListing border rounded p-4 mb-3 w-75 d-inline-flex-column">
            <p>Already registered? Click <a href="/#login?page={{ vm.returnPage }}">here</a> to login!</p>
            <form name="blogForm" ng-submit="vm.onSubmit()" ng-controller="RegisterController" class="d-flex flex-column align-items-center">
              <div role="alert" ng-show="vm.formError" class="alert alert-danger">{{ vm.formError }}</div>
              <label>Name</label>
              <input class="mb-4" type="text" ng-model="vm.credentials.name" placeholder="Blog User">
              <label>Email Address</label>
              <input class="mb-4" type="text" ng-model="vm.credentials.email" placeholder="bloguser@blogmail.com"></input>
              <label>Password</label>
              <input class="mb-4" type="password" ng-model="vm.credentials.password" placeholder="bloguser123"></input>
              <input class="border border-dark rounded bg-primary text-white" type="submit" value="Register">
            </form>
          </div>
        </div>
      </div>
    </script>

    <script type="text/ng-template" id="loginPage.html">
      <h1 class="mt-5">{{ vm.pageHeader.title }}</h1>
      <div class="container">
        <div class="list ml-5 d-flex flex-column h-100 align-items-center">
          <div class="blogListing border rounded p-4 mb-3 w-75 d-inline-flex-column">
            <p>Not registered? Click <a href="/#register?page={{ vm.returnPage }}">here</a> to register!</p>
            <form name="blogForm" ng-submit="vm.onSubmit()" ng-controller="RegisterController" class="d-flex flex-column align-items-center">
              <div role="alert" ng-show="vm.formError" class="alert alert-danger">{{ vm.formError }}</div>
              <label>Email Address</label>
              <input class="mb-4" type="text" ng-model="vm.credentials.email" placeholder="bloguser@blogmail.com"></input>
              <label>Password</label>
              <input class="mb-4" type="password" ng-model="vm.credentials.password" placeholder="bloguser123"></input>
              <input class="border border-dark rounded bg-primary text-white" type="submit" value="Login">
            </form>
          </div>
        </div>
      </div>
    </script>
    
    <div ng-view></div>
    
    <script src="/angular/bloggerApp.js"></script>
    <script src="/auth/authentication.js"></script>
    <script src="/nav/navigation.js"></script>
  </body>
</html>
